<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artwork Details - BanArts</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .artwork-details-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .artwork-header {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: flex-start;
        }

        .artwork-image {
            flex: 1;
            max-width: 500px;
        }

        .artwork-image img {
            width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .artwork-info {
            flex: 1;
        }

        .artwork-title {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: #333;
        }

        .artwork-artist {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 20px;
        }

        .artwork-artist a {
            color: #007bff;
            text-decoration: none;
        }

        .artwork-artist a:hover {
            text-decoration: underline;
        }

        .artwork-description {
            font-size: 1.05rem;
            line-height: 1.7;
            margin-bottom: 30px;
            font-weight: 500;
            color: #444;
            letter-spacing: 0.2px;
        }

        .artwork-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .details-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 8px;
        }

        .details-section h3 {
            margin-bottom: 15px;
            color: #333;
            border-bottom: 2px solid #007bff;
            padding-bottom: 5px;
        }

        .details-list {
            list-style: none;
            padding: 0;
        }

        .details-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .details-list li:last-child {
            border-bottom: none;
        }

        .details-list strong {
            color: #333;
        }

        .contact-section {
            background: #e9ecef;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 40px;
        }

        .related-artworks {
            margin-top: 50px;
        }

        .related-artworks h2 {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
        }

        .artworks-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .artwork-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .artwork-card:hover {
            transform: translateY(-5px);
        }

        .artwork-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .artwork-card-content {
            padding: 15px;
        }

        .artwork-card h3 {
            margin: 0 0 8px 0;
            font-size: 1.1rem;
            color: #333;
        }

        .artwork-card p {
            margin: 0;
            color: #666;
            font-size: 0.9rem;
        }


        .back-btn {
            display: inline-block;
            padding: 10px 20px;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            margin-top: -30px;
        }

        .back-btn:hover {
            background: #0056b3;
            color: white;
        }

        .loading {
            text-align: center;
            padding: 50px;
            font-size: 1.2rem;
            color: #666;
        }

        .error {
            text-align: center;
            padding: 50px;
            color: #dc3545;
        }

        @media (max-width: 768px) {
            .artwork-header {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .artwork-image {
                max-width: 100%;
                width: 100%;
                display: flex;
                justify-content: center;
            }

            .artwork-image img {
                max-width: 100%;
                height: auto;
            }

            .artwork-info {
                width: 100%;
            }

            .artwork-title {
                font-size: 2rem;
            }

            .artwork-details-grid {
                grid-template-columns: 1fr;
            }

            .details-section h3,
            .contact-section h3 {
                text-align: center;
            }

            .details-list li {
                text-align: center;
            }

            .contact-section {
                display: flex;
                flex-direction: column;
                align-items: center;
            }

            .contact-section > div {
                flex-direction: column !important;
                text-align: center;
            }

            .contact-section img {
                margin-right: 0 !important;
                margin-bottom: 15px;
            }

            .back-btn {
                display: block;
                width: fit-content;
                margin: 20px auto 0;
            }
        }
    </style>
</head>
<body>
    <header>
        <nav role="navigation" aria-label="Main navigation">
            <div class="logo">
                <img src="img/bantayanon artists logo.jpg" alt="BanArts Logo" class="logo-img">
                BanArts
            </div>
            <div class="nav-menu">
                <div class="search-bar">
                    <label for="search-input" class="sr-only">Search artworks, artists, galleries...</label>
                    <input type="text" id="search-input" placeholder="Search artworks, artists..." aria-describedby="search-help">
                    <button type="submit" aria-label="Submit search">Search</button>
                    <div id="search-help" class="sr-only">Type to search for artworks, artists, or galleries</div>
                </div>
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="/artists.html">Artists</a></li>
                    <li><a href="/artworks.html">Artworks</a></li>
                    <li><a href="/galleries.html">Galleries</a></li>
                    <li><a href="/museums.html">Museums</a></li>
                    <li><a href="/events.html">Events</a></li>
                    <li><a href="/videos.html">Videos</a></li>
                    <li><a href="/collections.html">Collections</a></li>
                </ul>
                <div class="auth-buttons">
                    <button type="button" class="login-link">Login</button>
                    <button type="button" class="signup-btn">Signup</button>
                </div>
            </div>
            <div class="mobile-header-icons">
                <div class="notification-container"></div>
                <div class="profile-dropdown-container mobile-icon">
                    <a href="/profile.html" class="profile-icon" id="profile-icon-link">
                        <div class="nav-profile-avatar" id="nav-profile-avatar"></div>
                    </a>
                    <div class="profile-dropdown">
                        <div class="profile-dropdown-header">
                            <img src="/img/profile icon.webp" alt="Profile" class="dropdown-profile-icon" id="dropdown-profile-icon">
                            <div class="dropdown-profile-name">John Doe</div>
                            <a href="/profile.html" class="view-profile-btn">View Profile</a>
                        </div>
                        <div class="profile-dropdown-item">My Collection</div>
                        <a href="/profile.html#uploads" class="profile-dropdown-item">Artworks</a>
                        <div class="dropdown-divider"></div>
                        <div class="profile-dropdown-item">Favorites</div>
                        <a href="/profile.html#saved" class="profile-dropdown-item">Saves</a>
                        <a href="/profile.html#followed" class="profile-dropdown-item">Follows</a>
                        <div class="dropdown-divider"></div>
                        <div class="profile-dropdown-item settings-header">Settings</div>
                        <a href="/settings.html" class="profile-dropdown-item edit-profile-btn">Edit Profile</a>
                        <a href="#" class="profile-dropdown-item logout-item">Logout</a>
                    </div>
                </div>
                <button class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                    &#9776;
                </button>
            </div>
        </nav>
    </header>

    <main style="margin-top: 90px;">
        <div class="artwork-details-container">
            <div id="artwork-content">
                <div class="loading">Loading artwork details...</div>
            </div>
        </div>
    </main>

   <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>About BanArts</h3>
                <p>BanArts is the official platform of the Bantayanon Artists Group, dedicated to showcasing the rich artistic heritage and contemporary creativity of Bantayan Island, Philippines. We connect local artists with art enthusiasts worldwide.</p>
            </div>
            <div class="footer-section">
                <h3>Contact Us</h3>
                <p>Email: bantayanonartists@gmail.com<br>Phone: 09481766048<br>Address: Bantayan Island, Cebu, Philippines</p>
            </div>
            <div class="footer-section">
                <h3>Follow Us</h3>
                <div class="social-icons">
                    <a href="#" class="social-icon-link" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-icon-link" aria-label="Gmail"><i class="fas fa-envelope"></i></a>
                    <a href="#" class="social-icon-link" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 BanArts. All rights reserved.</p>
        </div>
    </footer>

    <!-- Login/Signup Modal -->
    <div id="auth-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div class="modal-tabs">
                <button class="tab-btn active" onclick="openTab('login')">Login</button>
                <button class="tab-btn" onclick="openTab('signup')">Signup</button>
            </div>
            <div id="login-tab" class="tab-content active">
                <img src="img/bantayanon artists logo.jpg" alt="BanArts Logo" class="modal-logo">
                <h2>Login</h2>
                <form id="login-form">
                    <input type="email" id="login-email" placeholder="Email" required>
                    <div class="password-field">
                        <input type="password" id="login-password" class="password-input" placeholder="Password" required>
                        <button type="button" class="password-toggle" onclick="togglePasswordVisibility(this)" aria-label="Show password">
                            <i class="far fa-eye"></i>
                        </button>
                    </div>
                    <div class="forgot-password-container">
                        <a href="#" id="forgot-password-link">Forgot Password?</a>
                    </div>
                    <button type="submit">Login</button>
                    <div id="login-error" style="color: red; margin-top: 1rem; display: none;"></div>
                </form>
                <div class="divider">or</div>
                <div class="social-login">
                    <a href="/auth/facebook" class="social-link facebook"><img src="img/facebook-logo.avif" alt="Facebook"></a>
                    <a href="/auth/google" class="social-link google"><img src="img/google-icon-logo-png-transparent.png" alt="Google"></a>
                    <a href="/auth/twitter" class="social-link apple"><img src="img/twitter-x.webp" alt="Twitter"></a>
                </div>
                <p class="legal-text">By clicking Sign Up or Continue with Email, Twitter, Google, or Facebook, you agree to BanArts <a href="terms.html" style="color: blue; text-decoration: underline;">Terms and Conditions</a> and Privacy Policy. This site is protected by reCAPTCHA and the Google Privacy Policy and Terms of Service apply.</p>
            </div>
            <div id="signup-tab" class="tab-content">
                <img src="img/bantayanon artists logo.jpg" alt="BanArts Logo" class="modal-logo">
                <h2>Signup</h2>
                <form id="signup-form">
                    <input type="text" id="signup-name" placeholder="Full Name" required>
                    <input type="email" id="signup-email" placeholder="Email" required>
                    <div class="password-field">
                        <input type="password" id="signup-password" class="password-input" placeholder="Password" required>
                        <button type="button" class="password-toggle" onclick="togglePasswordVisibility(this)" aria-label="Show password">
                            <i class="far fa-eye"></i>
                        </button>
                    </div>
                    <div class="password-field">
                        <input type="password" id="signup-confirm-password" class="password-input" placeholder="Confirm Password" required>
                        <button type="button" class="password-toggle" onclick="togglePasswordVisibility(this)" aria-label="Show password">
                            <i class="far fa-eye"></i>
                        </button>
                    </div>
                    <button type="submit">Signup</button>
                    <div id="signup-error" style="color: red; margin-top: 1rem; display: none;"></div>
                </form>
                <div class="divider">or</div>
                <div class="social-login">
                    <a href="/auth/facebook" class="social-link facebook"><img src="img/facebook-logo.avif" alt="Facebook"></a>
                    <a href="/auth/google" class="social-link google"><img src="img/google-icon-logo-png-transparent.png" alt="Google"></a>
                    <a href="/auth/twitter" class="social-link apple"><img src="img/twitter-x.webp" alt="Twitter"></a>
                </div>
                <p class="legal-text">By clicking Sign Up or Continue with Email, Twitter, Google, or Facebook, you agree to BanArts Terms and Conditions and Privacy Policy. This site is protected by reCAPTCHA and the Google Privacy Policy and Terms of Service apply.</p>
            
    <!-- Forgot Password Modal -->
    <div id="forgot-password-modal" class="modal" role="dialog" aria-labelledby="forgot-password-title" aria-modal="true" aria-hidden="true">
        <div class="modal-content">
            <span class="close-forgot-password close" aria-label="Close modal">&times;</span>
            <div id="forgot-password-tab" class="tab-content active">
                <img src="img/bantayanon artists logo.jpg" alt="BanArts Logo" class="modal-logo">
                <h2 id="forgot-password-title">Change Password</h2>
                <p class="modal-subtitle">Securely update your account credentials</p>
                <form id="forgot-password-form">
                    <div class="input-group">
                        <i class="fas fa-envelope input-icon"></i>
                        <input type="email" id="reset-email" placeholder="Email Address" required>
                    </div>
                    <div class="password-field">
                        <div class="input-group">
                            <i class="fas fa-lock input-icon"></i>
                            <input type="password" id="reset-new-password" class="password-input" placeholder="New Password" required>
                        </div>
                        <button type="button" class="password-toggle" onclick="togglePasswordVisibility(this)" aria-label="Show password">
                            <i class="far fa-eye"></i>
                        </button>
                    </div>
                    <div class="password-field">
                        <div class="input-group">
                            <i class="fas fa-shield-alt input-icon"></i>
                            <input type="password" id="reset-confirm-password" class="password-input" placeholder="Confirm New Password" required>
                        </div>
                        <button type="button" class="password-toggle" onclick="togglePasswordVisibility(this)" aria-label="Show password">
                            <i class="far fa-eye"></i>
                        </button>
                    </div>
                    <button type="submit" class="submit-btn">Update Password</button>
                    <div id="forgot-password-error" class="error-message" style="display: none;"></div>
                    <div id="forgot-password-success" class="success-message" style="display: none;"></div>
                </form>
                <div class="back-to-login">
                    <a href="#" id="back-to-login-link"><i class="fas fa-arrow-left"></i> Back to Login</a>
                </div>
            </div>
        </div>
    </div>

</div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Get artwork ID from URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const artworkId = urlParams.get('id');

        if (!artworkId) {
            document.getElementById('artwork-content').innerHTML = '<div class="error">No artwork ID provided</div>';
        } else {
            loadArtworkDetails(artworkId);
        }

        function loadArtworkDetails(id) {
            fetch(`/artworks/${id}`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Artwork not found');
                    }
                    return response.json();
                })
                .then(artwork => {
                    // Load related artworks by the same artist only if artist_id is present
                    if (artwork.artist_id) {
                        fetch(`/artworks?artist_id=${artwork.artist_id}&_limit=10`)
                            .then(response => response.json())
                            .then(relatedArtworks => {
                                const filteredRelated = relatedArtworks.filter(art => art.artwork_id != id);
                                displayArtworkDetails(artwork, filteredRelated);
                            })
                            .catch(error => {
                                console.error('Error loading related artworks:', error);
                                displayArtworkDetails(artwork, []);
                            });
                    } else {
                        displayArtworkDetails(artwork, []);
                    }
                })
                .catch(error => {
                    console.error('Error loading artwork:', error);
                    document.getElementById('artwork-content').innerHTML = '<div class="error">Artwork not found or error loading details</div>';
                });
        }

        function displayArtworkDetails(artwork, relatedArtworks) {
            const container = document.getElementById('artwork-content');

            const html = `
                <div class="artwork-header">
                    <div class="artwork-image">
                        <img src="${artwork.image_url || 'img/art1.jpg'}" alt="${artwork.title}">
                    </div>
                    <div class="artwork-info">
                        <h1 class="artwork-title">${artwork.title}</h1>
                        <p class="artwork-artist">By <a href="artist-details.html?id=${artwork.artist_id || ''}">${artwork.artist_name || 'Unknown Artist'}</a></p>
                        <p class="artwork-description">${artwork.description || 'No description available.'}</p>

                        <div class="artwork-details-grid">
                            <div class="details-section">
                                <h3>Artwork Information</h3>
                                <ul class="details-list">
                                    <li><strong>Title:</strong> ${artwork.title}</li>
                                    <li><strong>Artist:</strong> ${artwork.artist_name || 'Unknown'}</li>
                                    <li><strong>Category:</strong> ${artwork.categories || 'N/A'}</li>
                                    <li><strong>Medium:</strong> ${artwork.medium || 'N/A'}</li>
                                    <li><strong>Dimensions:</strong> ${artwork.size || 'N/A'}</li>
                                    <li><strong>Year:</strong> ${artwork.year || 'N/A'}</li>
                                    <li><strong>Price:</strong> ${artwork.price || 'N/A'}</li>
                                    ${artwork.certificate ? `<li><strong>Certificate of Authenticity:</strong> ${artwork.certificate}</li>` : ''}
                                    ${artwork.signature ? `<li><strong>Signature:</strong> ${artwork.signature}</li>` : ''}
                                </ul>
                            </div>

                            <div class="contact-section">
                                <h3>Contact the Artist</h3>
                                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                                    <img src="${artwork.artist_photo || 'img/profile icon.webp'}" alt="${artwork.artist_name}" style="width: 60px; height: 60px; border-radius: 50%; margin-right: 15px; object-fit: cover; border: 2px solid #007bff;">
                                    <div>
                                        <h4 style="margin: 0; color: #333;">${artwork.artist_name || 'Unknown Artist'}</h4>
                                        <p style="margin: 5px 0; color: #666; font-size: 0.9rem;">${artwork.artist_category || 'Artist'}</p>
                                    </div>
                                </div>
                                ${artwork.artist_email ? `<p><strong>Email:</strong> ${artwork.artist_email}</p>` : ''}
                                ${artwork.artist_contact ? `<p><strong>Phone:</strong> ${artwork.artist_contact}</p>` : ''}
                                <p><strong>Artist Profile:</strong> <a href="artist-details.html?id=${artwork.artist_id || ''}" target="_blank">View Full Profile</a></p>
                            </div>
                        </div>
                        <a href="artworks.html" class="back-btn">Back to Artworks</a>
                    </div>
                </div>

                ${relatedArtworks.length > 0 ? `
                <section class="related-artworks">
                    <h2>Related Artworks</h2>
                    <div class="artworks-grid" style="display: flex; overflow-x: auto; gap: 20px; padding: 10px 0; scrollbar-width: thin;">
                        ${relatedArtworks.map(art => `
                            <div class="artwork-card" onclick="window.location.href='artwork-details.html?id=${art.artwork_id}'" style="cursor: pointer; flex-shrink: 0;">
                                <img src="${art.image_url || 'img/art1.jpg'}" alt="${art.title}">
                                <div class="artwork-card-content">
                                    <h3>${art.title}</h3>
                                    <p>By ${art.artist_name || 'Unknown Artist'}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </section>
                ` : ''}
            `;

            container.innerHTML = html;
        }
    </script>
</body>
</html>